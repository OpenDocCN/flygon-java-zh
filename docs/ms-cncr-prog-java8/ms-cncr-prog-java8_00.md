# 前言

如今，计算机系统（以及其他相关系统，如平板电脑或智能手机）允许您同时执行多个任务。这是可能的，因为它们具有并发操作系统，可以同时控制多个任务。如果您使用喜爱的编程语言的并发 API，还可以有一个应用程序执行多个任务（读取文件，显示消息或通过网络读取数据）。Java 包括一个非常强大的并发 API，可以让您轻松实现任何类型的并发应用程序。该 API 在每个版本中都增加了程序员提供的功能。现在，在 Java 8 中，它已经包括了流 API 和新的方法和类，以便于实现并发应用程序。本书涵盖了 Java 并发 API 的最重要元素，向您展示如何在实际应用程序中使用它们。这些元素如下：

+   执行者框架，用于控制大量任务的执行

+   Phaser 类，用于执行可以分为阶段的任务

+   Fork/Join 框架，用于使用分而治之技术执行解决问题的任务

+   流 API，用于处理大数据源

+   并发数据结构，用于在并发应用程序中存储数据

+   同步机制，用于组织并发任务

但它包括更多内容：设计并发应用程序的方法，设计模式，实现良好的并发应用程序的技巧和窍门，以及测试并发应用程序的工具和技术。

# 本书涵盖的内容

第一章，“第一步-并发设计原则”，将教您并发应用程序的设计原则。他们还将学习并发应用程序的可能问题以及设计它们的方法，然后是一些设计模式，技巧和窍门。

第二章，“管理大量线程-执行者”，将教您执行者框架的基本原理。该框架允许您处理大量线程而无需创建或管理它们。您将实现 k 最近邻算法和基本的客户端/服务器应用程序。

第三章，“从执行者中获得最大效益”，将教您执行者的一些高级特性，包括取消和安排任务在延迟后执行任务或每隔一段时间执行任务。您将实现一个高级客户端/服务器应用程序和一个新闻阅读器。

第四章，“从任务中获取数据-可调用和未来接口”，将教您如何在执行者中使用返回结果的任务，使用可调用和未来接口。您将实现最佳匹配算法和构建倒排索引的应用程序。

第五章，“将任务分为阶段运行-Phaser 类”，将教您如何使用 Phaser 类以并发方式执行可以分为阶段的任务。您将实现关键词提取算法和遗传算法。

第六章，“优化分治解决方案-分叉/加入框架”，将教您如何使用一种特殊的执行程序，该执行程序经过优化，可以使用分治技术解决的问题：分叉/加入框架及其工作窃取算法。您将实现 k 均值聚类算法、数据过滤算法和归并排序算法。

第七章，“使用并行流处理大型数据集-映射和减少模型”，将教您如何使用流来处理大型数据集。在本章中，您将学习如何使用流 API 实现映射和减少应用程序以及流的许多其他功能。您将实现一个数值汇总算法和一个信息检索搜索工具。

第八章，“使用并行流处理大型数据集-映射和收集模型”，将教您如何使用流 API 的 collect()方法将数据流进行可变减少为不同的数据结构，包括 Collectors 类中定义的预定义收集器。您将实现一个无需索引的数据搜索工具、一个推荐系统以及一个计算社交网络中两个人的共同联系人列表的算法。

第九章，“深入并发数据结构和同步实用程序”，将教您如何使用最重要的并发数据结构（可在并发应用程序中使用而不会引起数据竞争条件的数据结构）以及 Java 并发 API 中包含的所有同步机制来组织任务的执行。

第十章，“片段集成和替代方案的实现”，将教您如何使用共享内存或消息传递使用其自己的并发技术的并发应用程序片段实现一个大型应用程序。您还将学习书中介绍的不同实现替代方案。

第十一章，“测试和监视并发应用程序”，将教您如何获取有关某些 Java 并发 API 元素（线程、锁、执行程序等）状态的信息。您还将学习如何使用 Java VisualVM 应用程序监视并发应用程序，以及如何使用 MultithreadedTC 库和 Java Pathfinder 应用程序测试并发应用程序。

# 您需要为这本书做好准备

要跟上这本书，您需要对 Java 编程语言有基本的了解。对并发概念的基本了解也是受欢迎的。

# 这本书是为谁准备的

如果您是一名 Java 开发人员，了解并发编程的基本原则，但希望获得 Java 并发 API 的专业知识，以开发利用计算机所有硬件资源的优化应用程序，那么这本书适合您。

# 约定

在这本书中，您将找到许多文本样式，用于区分不同类型的信息。以下是这些样式的一些示例以及它们的含义解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名显示如下："`Product`类存储有关产品的信息。"

代码块设置如下：

```java
if (problem.size() > DEFAULT_SIZE) {
    divideTasks();
    executeTask();
    taskResults=joinTasksResult();
    return taskResults;
} else {
    taskResults=solveBasicProblem();
    return taskResults;
}
```

新术语和重要词汇以粗体显示。例如，您在屏幕上看到的单词，比如菜单或对话框中的单词，会以这样的形式出现在文本中："保留默认值，然后点击**下一步**按钮。"

### 注意

警告或重要说明会出现在这样的框中。

### 提示

提示和技巧会出现在这样的形式中。

# 读者反馈

我们非常欢迎读者的反馈。请告诉我们您对这本书的看法——您喜欢或不喜欢的地方。读者的反馈对我们很重要，因为它可以帮助我们开发您真正能够从中受益的书籍。

如需向我们发送一般反馈，只需发送电子邮件至`<feedback@packtpub.com>`，并在主题中提及书籍的标题。

如果您在某个专题上有专业知识，并且有兴趣撰写或为一本书作出贡献，请参阅我们的作者指南，网址为[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在您是 Packt 书籍的自豪所有者，我们有很多东西可以帮助您充分利用您的购买。

## 下载示例代码

您可以从您在[`www.packtpub.com`](http://www.packtpub.com)的账户中下载您购买的所有 Packt Publishing 书籍的示例代码文件。如果您在其他地方购买了这本书，您可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，以便将文件直接发送到您的电子邮件。

您可以按照以下步骤下载代码文件：

1.  使用您的电子邮件地址和密码登录或注册我们的网站。

1.  将鼠标指针悬停在顶部的**支持**选项卡上。

1.  点击**代码下载和勘误**。

1.  在**搜索**框中输入书名。

1.  选择您要下载代码文件的书籍。

1.  从下拉菜单中选择您购买这本书的地点。

1.  点击**代码下载**。

下载文件后，请确保使用最新版本的解压缩软件解压缩文件夹：

+   WinRAR / 7-Zip for Windows

+   Zipeg / iZip / UnRarX for Mac

+   7-Zip / PeaZip for Linux

## 勘误

尽管我们已经尽一切努力确保内容的准确性，但错误是难免的。如果您在我们的书籍中发现错误——可能是文本或代码中的错误——我们将不胜感激，如果您能向我们报告。通过这样做，您可以帮助其他读者避免挫折，并帮助我们改进本书的后续版本。如果您发现任何勘误，请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)，选择您的书籍，点击**勘误提交表**链接，并输入您的勘误详情。一旦您的勘误被验证，您的提交将被接受，并且勘误将被上传到我们的网站或添加到该书籍的勘误列表中的**勘误**部分。

要查看先前提交的勘误表，请访问[`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索框中输入书名。所需信息将出现在**勘误**部分下方。

## 盗版

互联网上的盗版行为是所有媒体的持续问题。在 Packt，我们非常重视版权和许可的保护。如果您在互联网上发现我们作品的任何非法副本，请立即向我们提供位置地址或网站名称，以便我们采取补救措施。

请通过链接`<copyright@packtpub.com>`与我们联系，提供涉嫌盗版材料的链接。

我们感谢您帮助我们保护我们的作者和我们提供有价值内容的能力。

## 电子书、折扣优惠等

您知道 Packt 提供每本出版书籍的电子书版本，包括 PDF 和 ePub 文件吗？您可以在[www.PacktPub.com](http://www.PacktPub.com)升级到电子书版本，作为印刷书的客户，您有资格享受电子书折扣。欢迎通过`<customercare@packtpub.com>`与我们联系以获取更多详情。

在[www.PacktPub.com](http://www.PacktPub.com)，您还可以阅读一系列免费的技术文章，订阅各种免费的新闻简报，并获得 Packt 图书和电子书的独家折扣和优惠。

## 问题

如果您对本书的任何方面有问题，可以通过`<questions@packtpub.com>`与我们联系，我们将尽力解决问题。
