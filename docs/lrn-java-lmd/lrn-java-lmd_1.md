# 第一章。介绍

欢迎来到学习 Java Lambda。

Java 在其第 8 版发布中经历了巨大的变革。很多变化是由于 Java 变得老态龙钟的观念所驱动的。为了与现代的函数式编程语言竞争，Java 8 引入了像 lambda 这样的函数式编程构造，以更好地支持更加函数式的风格。

本书提供了对 lambda 和其他各种功能的简明解释，以使它们在 Java 中发挥作用。除了提供 lambda 的背景、语法和使用示例外，本书还描述了其他相关功能，如函数接口和类型推断。

# 通往现代 Java 的道路

Java 8 于 2014 年 3 月 18 日发布，距上一版发布已有两年零七个月。它受到了延迟和技术问题的困扰，但最终发布时，代表了自 Java 5 以来最重大的变革之一。

当然，头条新闻是 lambda 和对支持函数式编程思想的改进。随着**Scala**等语言占据主导地位，以及现代趋势向函数式编程，Java 必须做些什么来跟上。

尽管 Java 不是也永远不会成为*纯*函数式编程语言，但 Java 8 的变化使得开发人员可以更容易地使用函数式习语，而不必求助于第三方库。

## 现代 Java 特性

要让你了解 Java 8 有多么重大的变革，以及为什么它引领了一个新的、现代的 Java，以下是它引入的新特性的大部分完整列表：

+   Lambda 支持。

+   核心 API 已更新以利用 lambda，包括集合 API 和一个新的函数包，以帮助构建函数构造。

+   开发了完全新的 API，使用了 lambda，比如流 API，它带来了对数据的函数式处理。例如，流 API 中的`map`和`flatMap`等函数使得以声明式的方式处理列表，并摆脱外部迭代转向内部迭代成为可能。这反过来允许*库供应商*担心细节并根据他们的喜好优化处理。例如，现在 Java 提供了一种并行处理流的方式，而不必让开发人员操心细节。

+   核心 API 的微小改变；为字符串、集合、比较器、数字和数学引入了新的辅助方法。

+   一些新增功能正在改变人们编码的方式。例如，`Optional`类对一些人来说已经很熟悉，它提供了更好的处理空值的方式。

+   有各种并发库的改进。例如改进的并发哈希映射，可完成的未来，线程安全的累加器，改进的读写锁（称为 StampedLock），一个工作窃取线程池的实现等等。

+   支持向接口添加静态方法。

+   默认方法（又称*虚拟扩展*或*防御者方法*）。

+   类型推断得到了改进，引入了新的构造，如函数接口和方法引用，以更好地支持 lambda。

+   引入了改进的日期和时间 API（类似于流行的`Joda-time`库）。

+   `IO`和`NIO`包得到了欢迎的补充，以使用新的流 API 处理 IO 流。

+   反射和注解得到了改进。

+   Java 8 配备了全新的 JavaScript 引擎。Nashorn 取代了 Rhino，速度更快，对 ECMA-Script 的支持更好。

+   JVM 的改进；与 JRocket 的集成已完成，创建了一个更快的 JVM。

+   JVM 放弃了永久代的概念，而是使用本机操作系统内存来存储类元数据。这是一个巨大的变革，提供了更好的内存利用率。

+   JRocket 集成还将 Mission control（jmc）作为标准引入了 JDK。它与 JConsole 和 VisualVM 具有类似的功能，但添加了非常廉价的性能分析。

+   其他杂项改进，如改进 JavaFX，base64 编码支持等等。
